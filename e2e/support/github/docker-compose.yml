# This docker compose file is used to create a backend environment for the e2e.yml workflow.
version: "3.7"

services:
  gateway:
    image: openmrs/openmrs-reference-application-3-gateway:${TAG:-nightly}
    ports:
      - "8080:80"

  frontend:
    build:
      context: .
    environment:
      SPA_PATH: /openmrs/spa
      API_URL: /openmrs

  backend:
    image: piumal1999/openmrs-reference-application-3-backend:nightly-with-data # TODO: Change this to openmrs/openmrs-reference-application-3-backend:nightly-with-data once the image is available
    depends_on:
      - db

  # MariaDB
  db:
    image: piumal1999/openmrs-reference-application-3-db:nightly-with-data # TODO: Change this to openmrs/openmrs-reference-application-3-db:nightly-with-data once the image is available
